<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Stellar Echoes Control Room</title>

<!-- ===== CSS ===== -->
<style>
.params {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: repeat(6, auto);
    grid-auto-flow: column;
    column-gap: 30px;
    max-width: 700px; 
}
    
body {
    font-family: sans-serif;
    padding: 20px;
}

.param {
    margin-bottom: 15px;
}

.slider {
    width: 450px;
    --SliderColor: #1c1c1c
}
    
.number {
    width: 50px;
    margin-left: 10px;
}

/* ===== RANGE SLIDER STYLE ===== */

/* —Å–∞–º —Ç—Ä–µ–∫ */
input[type="range"] {
    -webkit-appearance: none;
    width: 300px;
    height: 4px;
    background: #000;
    border-radius: 2px;
    outline: none;
}

/* –±–µ–≥—É–Ω–æ–∫ (thumb) */
input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px;
    height: 14px;
    background: #000;
    border-radius: 50%;
    cursor: pointer;
}
    
</style>
</head>

<body>

<h2>Stellar Echoes Control Room</h2>

<button id="connect">üîå Connect</button>

<hr>

<!-- ===== PARAMETERS ===== -->
<div class="params">
    <div class="param" data-name="time" data-min="200" data-max="1000" data-step="1">
      <label>Time</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    
    <div class="param" data-name="mix" data-min="0.0" data-max="1.0" data-step="0.01">
      <label>Mix</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    
    <div class="param" data-name="regen" data-min="0.0" data-max="1.0" data-step="0.01">
      <label>Regen</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    
    <div class="param" data-name="rate" data-min="0.02" data-max="10.0" data-step="0.01">
      <label>Rate</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    
    <div class="param" data-name="tone" data-min="0.0" data-max="1.0" data-step="0.01">
      <label>Tone</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    
    <div class="param" data-name="depth" data-min="0.0" data-max="1.0" data-step="0.01">
      <label>Depth</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>

    <!-- next column -->
    <div class="param" data-name="decay" data-min="0.0" data-max="1.0" data-step="0.01">
      <label>Decay</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    
    <div class="param" data-name="reverbmix" data-min="0.0" data-max="1.0" data-step="0.01">
      <label>Reverb Mix</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    
    <div class="param" data-name="reverbtone" data-min="0.0" data-max="1.0" data-step="0.01">
      <label>Reverb Tone</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    
    <div class="param" data-name="waveform" data-min="0" data-max="4" data-step="1">
      <label>Waveform</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    
    <div class="param" data-name="tonesec" data-min="0.0" data-max="1.0" data-step="0.01">
      <label>Tone Secondary</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    
    <div class="param" data-name="depthsec" data-min="0.0" data-max="1.0" data-step="0.01">
      <label>Depth Secondary</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
</div>

<!-- ===== JAVASCRIPT ===== -->
<script>
let port;
let writer;

async function connect() {
    port = await navigator.serial.requestPort();
    await port.open({ baudRate: 115200 });
    writer = port.writable.getWriter();
}

async function send(cmd) {
    if (!writer) return;
    await writer.write(new TextEncoder().encode(cmd + "\n"));
}

document.getElementById("connect").onclick = connect;

document.querySelectorAll(".param").forEach(param => {
    const name = param.dataset.name;
    const min  = parseFloat(param.dataset.min);
    const max  = parseFloat(param.dataset.max);
    const step = parseFloat(param.dataset.step);

    const slider = param.querySelector(".slider");
    const number = param.querySelector(".number");

    slider.min = number.min = min;
    slider.max = number.max = max;
    slider.step = number.step = step;

    slider.value = number.value = min;

    slider.oninput = () => {
        number.value = slider.value;
    };

    number.oninput = () => {
        slider.value = number.value;
    };

    slider.onchange = number.onchange = () => {
        send(`${name} ${slider.value}`);
    };
});
</script>

</body>
</html>











